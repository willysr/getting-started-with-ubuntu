<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.22.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Colcon - Course 0: Fundamentals of Robotics</title>
<meta name="description" content="After having cloned the package, as seen in the previous module, we are ready to get into the building process with colcon. We will highlight the main steps to have the ROS packages usable in the environment. Note that colcon can provide additional tasks, including unit tests. For full details, please see the documentation.">


  <meta name="author" content="Your Name">
  
  <meta property="article:author" content="Your Name">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Course 0: Fundamentals of Robotics">
<meta property="og:title" content="Colcon">
<meta property="og:url" content="/modules/4/colcon.html">


  <meta property="og:description" content="After having cloned the package, as seen in the previous module, we are ready to get into the building process with colcon. We will highlight the main steps to have the ROS packages usable in the environment. Note that colcon can provide additional tasks, including unit tests. For full details, please see the documentation.">







  <meta property="article:published_time" content="2021-04-11T23:57:13+07:00">





  

  


<link rel="canonical" href="/modules/4/colcon.html">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "AWS",
      "url": "/"
    
  }
</script>






<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Course 0: Fundamentals of Robotics Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Course 0: Fundamentals of Robotics
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/index.html">Syllabus</a>
            </li><li class="masthead__menu-item">
              <a href="/modules/index.html">Modules</a>
            </li><li class="masthead__menu-item">
              <a href="/additional-resources.html">Additional resources</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          <span class="nav__sub-title">Course Introduction</span>
        

        
        <ul>
          
            <li><a href="/modules/0/motivation.html">Motivation</a></li>
          
            <li><a href="/modules/0/objectives.html">Course objectives</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Module 1 - Linux</span>
        

        
        <ul>
          
            <li><a href="/modules/1/linux.html">Linux</a></li>
          
            <li><a href="/modules/1/installation.html">Installation</a></li>
          
            <li><a href="/modules/1/commandline.html">Commandline</a></li>
          
            <li><a href="/modules/1/assessment.html">Assessment</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Module 2 - ROS configuration</span>
        

        
        <ul>
          
            <li><a href="/modules/2/ros.html">Getting started with ROS</a></li>
          
            <li><a href="/modules/2/ros-installation.html">ROS installation</a></li>
          
            <li><a href="/modules/2/ros-development.html">ROS packages</a></li>
          
            <li><a href="/modules/2/assessment.html">Assessment</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Module 3 - Version control systems</span>
        

        
        <ul>
          
            <li><a href="/modules/3/version-control-systems.html">Version control systems</a></li>
          
            <li><a href="/modules/3/git.html">Git</a></li>
          
            <li><a href="/modules/3/assessment.html">Assessment</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Module 4 - Building tools</span>
        

        
        <ul>
          
            <li><a href="/modules/4/build-tool.html">Building systems</a></li>
          
            <li><a href="/modules/4/colcon.html" class="active">Colcon</a></li>
          
            <li><a href="/modules/4/fix.html">Custom ROS packages fix</a></li>
          
            <li><a href="/modules/4/assessment.html">Assessment</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">End of the course and additional resources</span>
        

        
        <ul>
          
            <li><a href="/modules/5/waveshare.html">Simulator with Waveshare Jetbot</a></li>
          
            <li><a href="/additional-resources.html">Additional resources</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>

    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Colcon">
    <meta itemprop="description" content="After having cloned the package, as seen in the previous module, we are ready to get into the building process with colcon. We will highlight the main steps to have the ROS packages usable in the environment. Note that colcon can provide additional tasks, including unit tests. For full details, please see the documentation.">
    <meta itemprop="datePublished" content="2021-04-11T23:57:13+07:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Colcon
</h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>After having cloned the package, as seen in the <a href="/modules/3/git.html">previous module</a>, we are ready to get into the building process with <code class="language-plaintext highlighter-rouge">colcon</code>. We will highlight the main steps to have the ROS packages usable in the environment. Note that <code class="language-plaintext highlighter-rouge">colcon</code> can provide additional tasks, including unit tests. For full details, please see the <a href="https://colcon.readthedocs.io/en/released/user/quick-start.html">documentation</a>.</p>

<p>With a single command, <code class="language-plaintext highlighter-rouge">colcon</code> can build all packages that are within the workspace.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd ~/ros_workspace # go to the workspace
colcon build # compile and create the files necessary 
</code></pre></div></div>

<p>Such a command creates the following directories:</p>
<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">build</code> directory, where intermediate built files are stored in a subfolder created for each package.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">install</code> directory, where each package will be installed to. By default each package will be installed into separate subdirectories.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">log</code> directory, containing logging information about each <code class="language-plaintext highlighter-rouge">colcon</code> invocation.</p>
  </li>
</ul>

<p>To ensure that the new packages can be found, the environment variables need to be set:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>source ~/ros_workspace/install/setup.sh # setup the environment variables so that the ROS packages are found
</code></pre></div></div>

<p>Note that, if a ROS package is already installed with the same name, after using the command <code class="language-plaintext highlighter-rouge">source</code> as shown above, the package in the workspace will be prioritized. This feature is called <strong>overlay workspace</strong>, where any packages in the “sourced workspace” overlay any preexisting packages in “lower workspaces”. This can be a powerful tool for different development workflows.</p>

<p>Every time a new terminal is opened the <code class="language-plaintext highlighter-rouge">source</code> command must be repeated. When working with a single workspace, similarly to the source command for the general ROS installation, modify <code class="language-plaintext highlighter-rouge">.bashrc</code> with the following one-time command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>echo "source ~/ros_workspace/install/setup.sh" &gt;&gt; ~/.bashrc
source ~/.bashrc
</code></pre></div></div>

<p>In this way, the <code class="language-plaintext highlighter-rouge">source</code> command does not need to be repeated every time a new terminal is opened. However, when working with multiple workspaces, where packages might be overlaid, thus this is not recommended.</p>

<p>To clean the build, the created directories can be removed with the command <code class="language-plaintext highlighter-rouge">rm -r</code> (<code class="language-plaintext highlighter-rouge">-r</code> for recursive).</p>

<p>Analyzing the structure of each package, we notice that two files that appear consistently are <code class="language-plaintext highlighter-rouge">package.xml</code> and <code class="language-plaintext highlighter-rouge">CMakeLists.txt</code>. The first file is an XML file containing information about the package, e.g., package name, description, version, authors, maintainers, websites and dependencies. The second file is for the CMake build system for building software packages. There is a specific format that needs to be followed. High-level, it specifies dependencies, executables to build, and install rules. There are a few additional instructions for adding Python support and creating messages. In practice, it is fine to start from an existing <code class="language-plaintext highlighter-rouge">CMakeLists.txt</code> and modify it according to the specific needs. More information <a href="http://wiki.ros.org/Packages">here</a>.</p>

<p>Now that we are able to use <code class="language-plaintext highlighter-rouge">colcon build</code> let’s see in the <a href="/modules/4/fix.html">next unit</a> a couple of common errors that are more straightforward to identify and fix.</p>

<div style="font-size:8px;">
  <h3>References</h3>
  
<ol class="bibliography"></ol>

</div>


        
      </section>

      <footer class="page__meta">
        
        


        
  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2021-04-11T23:57:13+07:00">April 11, 2021</time></p>


      </footer>

      

      
  <nav class="pagination">
    
      <a href="/modules/4/build-tool.html" class="pagination--pager" title="Build Tool
">Previous</a>
    
    
      <a href="/modules/4/fix.html" class="pagination--pager" title="Custom ROS packages fix
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
            <hr>
    <div class="wrapper">
      <footer>
        &copy; Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved. // SPDX-License-Identifier: CC-BY-SA-4.0
      </footer>
    </div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>










  </body>
</html>
